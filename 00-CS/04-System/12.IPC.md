# IPC

## Introduction
- Inter-process Communication
- When multiple process is needed to solve a problem, IPC is used to share data
- Main IPC methods
    - Message Queue
    - Shared memory
    - Semaphore
    - Memory mapped file
    - Pipe

## General steps for IPC
1. Create key (name predefined for communication) for IPC
    - 32-bit integer
    - 12bit (device id) + 12bit (I-node number) + 8bit (user defined ID)
    - First 24 bits are file path
    - Which means, key is also a file
    - How to create a key? `key_t ftok(const char *pathname, int proj_id)`
        - proj_id = user defined ID
2. Create IPC object through Identifier (인식자)
    - IPC object: message queue, shared memory, etc... 
    - All IPC methods have common IPC struct called ipc_perm
    ```C
    struct ipc_perm {
        key_t key; // Key for IPC
        uid_t uid; // Effective UID of owner
        gid_t gid; // Effective GID of owner
        uid_t cuid; // Effective UID of creator
        gid_t cgid; // Effective GID of creator
        unsigned short mode; // Permissions
        unsigned short __seq; // Sequence number
    }
    ```
    - Permissions:
        - Process' EUID or GUID = IPC object's uid or gid
    - `ipcs`: shell command to search for ipc object
        - `-m`, `-q`, `-s` to search for information of shared memory/ message queue/ semaphore
3. Communicate via created IPC object
    - Use system call for each IPC method
4. Delete IPC object and terminate
    - `ipcrm object_id`: shell command to delete IPC object