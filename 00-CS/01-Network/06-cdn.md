# CDN

## CDN 이란?
- Content Delivery Network 의 약자이다. 
- 서버 상의 이미지나 컨텐츠를 전달해주는 특수한 역할을 맡는 서버이다.

### 서버의 단점 보완
- 기존의 2 (또는 3 ) 티어 아키텍쳐에서 서버는 클라이언트에게 직접 소스를 제공한다. 
- 그러나 서버와 클라이언트의 거리가 멀어지면 전송 속도가 매우 느려지며, 요청이 많아질 경우 서버가 처리해야 할 요청량이 많아짐에 따라 과부하가 올 수 있다. 
- 요청을 분산시키기 위한 대표적인 기술이 CDN 이다. 

## 작동 방식
- CDN 은 세계 곳곳에 설치되어 클라이언트가 요청 시 가장 가까운 CDN (엣지라고도 불린다)으로부터 정적 컨텐츠를 제공받게 된다. 
- 원본 서버의 DNS 로 요청을 보낼 시 해당 요청이 CDN 으로 가도록 도메인에서 설정을 해 준다. 
- CDN 에는 데이터가 캐싱이 된다. 
	- 정적 캐시: 캐싱할 것들을 미리 엣지에 보내는 것
	- 동적 캐시: 사용자가 요청을 보낼 때마다 컨텐츠가 있으면 (cache hit) 보내고, 없으면 (cache miss) 서버에 요청해서 받아온다. 
	- 용도에 따라 정적 캐시와 동적 캐시를 적절히 분배하면 된다 (무거운 파일은 동적, 가벼운 파일은 정적)
- 정적, 동적 컨텐츠를 모두 저장할 수 있다.
	- 정적 컨텐츠: html, css, js 등 내용이 고정된 것
	- 동적 컨텐츠: api 요청과 같이 DB 의 변수에 따라 내용이 변하는 것 (캐싱하기 까다롭기 때문에 캐싱하지 않는 곳들도 많다)
		- 예) 날씨의 경우, 동적 컨텐츠지만 매 초 업데이트 될 필요는 없기 때문에 매 분마다 업데이트하여 캐싱하도록 할 수 있다.
		- 데이터가 캐시에 얼마나 남아있을지 지정하는 값을 TTL (Time-to-Live)라고 한다. 컨텐츠에 따라 적합한 TTL 을 지정할 수 있다. 

## CDN 운영의 장점
- CDN 을 활용할 경우 원본 서버를 운영하는 비용을 줄일 수 있다. (대역폭 비용 절감)
	- 대역폭: Bandwidth 라고도 하며, 주어진 시간 안에 데이터가 얼마나 많이 실려갈 수 있는지 계산하는 것이다. 
- CDN 하나에 이상이 생겨도 다른 엣지로 요청을 우회하면 되기 때문에 서비스의 안정성이 높아진다. 
- DDoS 공격 (동시에 여러 악성 요청을 서버로 보내 서버가 정상 작동하지 못하도록 하는 공격) 에도 공격이 분산되어 보안 측면에서도 낫다. 

## 배운 점
- CDN 도 Proxy 서버이자 포워드 서버이다. 

### 참고 자료
- [웹서비스에 필수! CDN이 뭔가요?](https://youtu.be/_kcoeK0ITkQ)