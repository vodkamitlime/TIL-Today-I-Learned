# 코드 기능 명세

## 개요
- 코드 기능 명세란, 입출력의 요구사항을 명시하는 체계
- 도메인: 스포트웨어가 풀어야 할 문제가 정의되는 공간
	- 도메인 문제 풀이 과정: 비즈니스 도메인 -> 문제 분석 -> 프로그래머 해결 -> 컴퓨터 실행 
	- 비즈니스 영역의 문제점을 도출, 개선해야할 방향이 정해지면 프로그래머는 이 기능 명세를 아키텍처와 코드로 번역한다. 이후 번역본을 컴퓨터에 전달한다. 
- 도메인 지식이 최대한 코드 기능 명세에 명확하게 표현되어 프로그래머에게 전달되어야 시간비용을 줄일 수 있다. 

## 테스트 기법 
- 수동 테스트 (QA): UI 를 사용해 기능 검증 
	- +) 사용자의 경험과 가장 비슷하게 검증
	- -) 실행 비용이 높고 결과의 변동이 큼
- 인수 테스트 : 배치가 완료된 시스템을 대상으로 하는 테스트
	- 사용자에게 인수되어도 충분한지 검증, 현장과 동일하거나 유사한 환경에서 배포 후 테스트 
	- +) 높은 신뢰도 
	- -) 고비용, 저품질 
- 단위 테스트: 시스템의 일부를 대상으로 검증
	- +) 저비용, 고품질
	- -) 낮은 신뢰도 (전체 시스템 이상 여부 검증 어려움) 

### 소프트웨어 회귀 (Software regression)
- 정의: 특정 사건 이후 잘 작동하던 코드 / 기능이 더이상 작동하지 않는 것 
- 시간이 갈수록 회귀 테스트의 대상은 늘어남 (why? 새로 추가되는 코드는 기존의 코드에도 영향을 미치기 때문) but 수동 테스트의 비용이 높기 때문에 보통 새로 추가되는 코드 (변경점) 에만 테스트 적용
- 따라서 테스트 자동화 필요성 증가 

### 단위 테스트
- 테스트 코드 길이가 짧다고 무조건 좋은 것이 아님. 어떤 Input 에서 오류가 났는지 명확히 확인할 수 있어야 함. 
- jest 의 parameterized test 기법 이용할 수 있음. (코드 중복도 제거하면서 어디서 오류가 났는지 추적 가능)
- 개인적인 의견: 그렇다고 또 꼭 parameterized test 가 좋은 것만은 아닌 것 같음 (히스토리 팔로업이 어려움, 테스트 코드를 또 읽어야 하는 시간, 비용의 문제) 따라서 각각의 테스트에 대해 설명을 달아주는 것은 어떨까 함.

## Test-first development (테스트 우선 개발)
- 운영 코드보다 테스트 코드를 먼저 작성
- 테스트 코드야말로 운영 명세를 잘 설명한 코드 
- 장점:
	- 명확하고 검증 가능한 목표 설정, 달성
	- 프로그래머가 문제를 구체적으로 이해 

## 리팩터링
- 의미를 유지하며 코드베이스를 정리하는 작업 (전체 시스템은 유지하면서 내부 구조를 바꾸는 작업)
- 테스트 코드가 리팩터링에 차지하는 역할: 새로운 코드가 기존의 의미를 유지하는지 쉽게 확인 가능 
- 내부 개선을 불안하지 않게 수행 가능 

## 테스트 주도 개발 (Test driven development) 
- A. 실패 케이스 추가 -> B. 테스트 통과 -> C. 구현 설계 개선 (리팩터링)
A. 구체적인 요구사항 검증하는 케이스 추가 후 실패 확인 
B. 테스트 성공을 위해 운영 코드 변경
C. 코드베이스 정리 -> 구현 설계 개선 (가독성, 적응성, 성능) 
- 켄트 벡의 설계 규칙:
	- 테스트 통과 
	- 의도를 표현
	- 중복 없음
	- 적은 요소 (테스트 통과에 필요한 요소만 남기기)
- TDD 흐름: 
	- 단위 테스트 작성 -> 실행 -> 성공 -> repeat
	- 단위 테스트 작성 -> 실행 -> 실패 -> 운영 코드 작성 -> repeat -> 성공 -> 설계 개선


### 참고자료
- The RED : 이규원의 현실 세상의 TDD : 안정감을 주는 코드 작성 방법